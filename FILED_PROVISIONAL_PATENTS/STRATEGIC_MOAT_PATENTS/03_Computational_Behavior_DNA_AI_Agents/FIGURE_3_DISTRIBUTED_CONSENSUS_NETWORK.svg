<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2c5aa0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e3f73;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="nodeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4caf50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2e7d32;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="maliciousGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f44336;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c62828;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="consensusGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ff9800;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e65100;stop-opacity:1" />
    </linearGradient>
    <filter id="dropShadow">
      <feDropShadow dx="2" dy="2" stdDeviation="3" opacity="0.4"/>
    </filter>
    <marker id="consensusArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ff9800"/>
    </marker>
    <marker id="validationArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50"/>
    </marker>
    <marker id="attackArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f44336"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#f5f5f5"/>
  
  <!-- Title Header -->
  <rect x="0" y="0" width="1200" height="50" fill="url(#headerGradient)"/>
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    Figure 3: Distributed Consensus Network for AI Agent DNA Validation
  </text>

  <!-- Network Topology -->
  <g id="networkTopology">
    <!-- Central Consensus Hub -->
    <circle cx="600" cy="300" r="80" fill="url(#consensusGradient)" filter="url(#dropShadow)"/>
    <text x="600" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      CONSENSUS
    </text>
    <text x="600" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      COORDINATOR
    </text>
    <text x="600" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      Byzantine Fault Tolerant
    </text>
    <text x="600" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      3/5 Majority Required</text>
    
    <!-- Honest Validation Nodes -->
    <circle cx="300" cy="150" r="50" fill="url(#nodeGradient)" filter="url(#dropShadow)"/>
    <text x="300" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
      NODE A
    </text>
    <text x="300" y="158" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
      Honest Validator
    </text>
    
    <circle cx="900" cy="150" r="50" fill="url(#nodeGradient)" filter="url(#dropShadow)"/>
    <text x="900" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
      NODE B
    </text>
    <text x="900" y="158" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
      Honest Validator
    </text>
    
    <circle cx="200" cy="450" r="50" fill="url(#nodeGradient)" filter="url(#dropShadow)"/>
    <text x="200" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
      NODE C
    </text>
    <text x="200" y="458" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
      Honest Validator
    </text>
    
    <circle cx="1000" cy="450" r="50" fill="url(#nodeGradient)" filter="url(#dropShadow)"/>
    <text x="1000" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
      NODE D
    </text>
    <text x="1000" y="458" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
      Honest Validator
    </text>
    
    <!-- Malicious Node (Byzantine) -->
    <circle cx="600" cy="600" r="50" fill="url(#maliciousGradient)" filter="url(#dropShadow)"/>
    <text x="600" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
      NODE E
    </text>
    <text x="600" y="608" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
      Malicious/Byzantine
    </text>
  </g>

  <!-- Communication Lines -->
  <g id="communicationLines">
    <!-- Honest nodes to consensus -->
    <line x1="350" y1="180" x2="540" y2="260" stroke="#4caf50" stroke-width="3" opacity="0.8" marker-end="url(#validationArrow)"/>
    <line x1="850" y1="180" x2="660" y2="260" stroke="#4caf50" stroke-width="3" opacity="0.8" marker-end="url(#validationArrow)"/>
    <line x1="250" y1="420" x2="540" y2="340" stroke="#4caf50" stroke-width="3" opacity="0.8" marker-end="url(#validationArrow)"/>
    <line x1="950" y1="420" x2="660" y2="340" stroke="#4caf50" stroke-width="3" opacity="0.8" marker-end="url(#validationArrow)"/>
    
    <!-- Malicious node to consensus -->
    <line x1="600" y1="550" x2="600" y2="380" stroke="#f44336" stroke-width="3" opacity="0.8" stroke-dasharray="10,5" marker-end="url(#attackArrow)"/>
    
    <!-- Inter-node validation communications -->
    <line x1="300" y1="200" x2="200" y2="400" stroke="#2196f3" stroke-width="2" opacity="0.6"/>
    <line x1="900" y1="200" x2="1000" y2="400" stroke="#2196f3" stroke-width="2" opacity="0.6"/>
    <line x1="350" y1="150" x2="850" y2="150" stroke="#2196f3" stroke-width="2" opacity="0.6"/>
    <line x1="250" y1="450" x2="950" y2="450" stroke="#2196f3" stroke-width="2" opacity="0.6"/>
  </g>

  <!-- Consensus Process Flow -->
  <rect x="50" y="70" width="1100" height="120" fill="white" rx="10" stroke="#666" stroke-width="2"/>
  <text x="600" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">
    BYZANTINE FAULT TOLERANT CONSENSUS PROCESS
  </text>
  
  <!-- Phase boxes -->
  <rect x="80" y="110" width="160" height="60" fill="#e3f2fd" rx="8" stroke="#1976d2" stroke-width="2"/>
  <text x="160" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
    Phase 1: Proposal
  </text>
  <text x="160" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    DNA validation request
  </text>
  <text x="160" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    distributed to all nodes
  </text>
  
  <rect x="260" y="110" width="160" height="60" fill="#f1f8e9" rx="8" stroke="#689f38" stroke-width="2"/>
  <text x="340" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
    Phase 2: Validation
  </text>
  <text x="340" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    Each node validates
  </text>
  <text x="340" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    DNA authenticity
  </text>
  
  <rect x="440" y="110" width="160" height="60" fill="#fff3e0" rx="8" stroke="#f57c00" stroke-width="2"/>
  <text x="520" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
    Phase 3: Voting
  </text>
  <text x="520" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    Nodes submit signed
  </text>
  <text x="520" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    validation results
  </text>
  
  <rect x="620" y="110" width="160" height="60" fill="#fce4ec" rx="8" stroke="#c2185b" stroke-width="2"/>
  <text x="700" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
    Phase 4: Consensus
  </text>
  <text x="700" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    Majority agreement
  </text>
  <text x="700" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    determines outcome
  </text>
  
  <rect x="800" y="110" width="160" height="60" fill="#f3e5f5" rx="8" stroke="#7b1fa2" stroke-width="2"/>
  <text x="880" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
    Phase 5: Commitment
  </text>
  <text x="880" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    Final decision
  </text>
  <text x="880" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    recorded &amp; distributed
  </text>
  
  <rect x="980" y="110" width="160" height="60" fill="#ffebee" rx="8" stroke="#d32f2f" stroke-width="2"/>
  <text x="1060" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
    Phase 6: Finalization
  </text>
  <text x="1060" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    Update global ledger
  </text>
  <text x="1060" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
    &amp; notify all participants
  </text>
  
  <!-- Flow arrows between phases -->
  <path d="M 240 140 L 260 140" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#consensusArrow)"/>
  <path d="M 420 140 L 440 140" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#consensusArrow)"/>
  <path d="M 600 140 L 620 140" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#consensusArrow)"/>
  <path d="M 780 140 L 800 140" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#consensusArrow)"/>
  <path d="M 960 140 L 980 140" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#consensusArrow)"/>

  <!-- Attack Scenarios -->
  <rect x="50" y="520" width="540" height="220" fill="#ffebee" rx="10" stroke="#f44336" stroke-width="2"/>
  <text x="320" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#d32f2f">
    ATTACK SCENARIOS &amp; DEFENSES
  </text>
  
  <g id="attackScenarios">
    <rect x="70" y="560" width="160" height="70" fill="white" rx="8" stroke="#f44336" stroke-width="1"/>
    <text x="150" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Byzantine Node Attack
    </text>
    <text x="150" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Sends conflicting votes
    </text>
    <text x="150" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Attempts to disrupt consensus
    </text>
    <text x="150" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Defense: 2/3 majority required
    </text>
    
    <rect x="250" y="560" width="160" height="70" fill="white" rx="8" stroke="#f44336" stroke-width="1"/>
    <text x="330" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Sybil Attack
    </text>
    <text x="330" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Creates multiple fake identities
    </text>
    <text x="330" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Attempts to control voting
    </text>
    <text x="330" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Defense: Identity verification
    </text>
    
    <rect x="430" y="560" width="160" height="70" fill="white" rx="8" stroke="#f44336" stroke-width="1"/>
    <text x="510" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      DNA Spoofing
    </text>
    <text x="510" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Submits fake DNA hashes
    </text>
    <text x="510" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Tries to impersonate agents
    </text>
    <text x="510" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Defense: Cryptographic proof
    </text>
    
    <rect x="70" y="650" width="160" height="70" fill="white" rx="8" stroke="#f44336" stroke-width="1"/>
    <text x="150" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Network Partition
    </text>
    <text x="150" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Splits network in half
    </text>
    <text x="150" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Prevents consensus formation
    </text>
    <text x="150" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Defense: Timeout &amp; recovery
    </text>
    
    <rect x="250" y="650" width="160" height="70" fill="white" rx="8" stroke="#f44336" stroke-width="1"/>
    <text x="330" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Timing Attack
    </text>
    <text x="330" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Delays critical messages
    </text>
    <text x="330" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Disrupts synchronization
    </text>
    <text x="330" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Defense: Timeout mechanisms
    </text>
    
    <rect x="430" y="650" width="160" height="70" fill="white" rx="8" stroke="#f44336" stroke-width="1"/>
    <text x="510" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Quantum Attack
    </text>
    <text x="510" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Breaks classical crypto
    </text>
    <text x="510" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Forges signatures
    </text>
    <text x="510" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Defense: Post-quantum crypto
    </text>
  </g>

  <!-- Consensus Guarantees -->
  <rect x="610" y="520" width="540" height="220" fill="#e8f5e8" rx="10" stroke="#4caf50" stroke-width="2"/>
  <text x="880" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2e7d32">
    CONSENSUS GUARANTEES &amp; PROPERTIES
  </text>
  
  <g id="consensusGuarantees">
    <rect x="630" y="560" width="160" height="70" fill="white" rx="8" stroke="#4caf50" stroke-width="1"/>
    <text x="710" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Safety Property
    </text>
    <text x="710" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Never accepts invalid DNA
    </text>
    <text x="710" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Agreement on valid decisions
    </text>
    <text x="710" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Consistency across nodes
    </text>
    
    <rect x="810" y="560" width="160" height="70" fill="white" rx="8" stroke="#4caf50" stroke-width="1"/>
    <text x="890" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Liveness Property
    </text>
    <text x="890" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Eventually reaches decision
    </text>
    <text x="890" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Progress guarantee
    </text>
    <text x="890" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Timeout-based recovery</text>
    
    <rect x="990" y="560" width="160" height="70" fill="white" rx="8" stroke="#4caf50" stroke-width="1"/>
    <text x="1070" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Fault Tolerance
    </text>
    <text x="1070" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Tolerates f &lt; n/3 failures
    </text>
    <text x="1070" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Continues with 2/3+ nodes
    </text>
    <text x="1070" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Automatic node recovery</text>
    
    <rect x="630" y="650" width="160" height="70" fill="white" rx="8" stroke="#4caf50" stroke-width="1"/>
    <text x="710" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Finality Guarantee
    </text>
    <text x="710" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Decisions are irreversible
    </text>
    <text x="710" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Cryptographic commitment
    </text>
    <text x="710" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Tamper-proof record</text>
    
    <rect x="810" y="650" width="160" height="70" fill="white" rx="8" stroke="#4caf50" stroke-width="1"/>
    <text x="890" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Scalability
    </text>
    <text x="890" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Supports 100+ nodes
    </text>
    <text x="890" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Dynamic membership
    </text>
    <text x="890" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Geographic distribution</text>
    
    <rect x="990" y="650" width="160" height="70" fill="white" rx="8" stroke="#4caf50" stroke-width="1"/>
    <text x="1070" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">
      Performance
    </text>
    <text x="1070" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • &lt;2 second finality time
    </text>
    <text x="1070" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • 10,000+ tx/second
    </text>
    <text x="1070" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">
      • Low latency validation</text>
  </g>

  <!-- Technical Parameters -->
  <rect x="50" y="760" width="1100" height="30" fill="#f0f8ff" rx="5" stroke="#2196f3" stroke-width="1"/>
  <text x="600" y="780" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    TECHNICAL PARAMETERS: Network Size: 5-100 nodes • Byzantine Fault Tolerance: f &lt; n/3 • Consensus Time: &lt;2 seconds • Throughput: 10,000+ validations/second
  </text>
</svg>